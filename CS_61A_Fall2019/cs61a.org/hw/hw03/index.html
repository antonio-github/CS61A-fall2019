<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from cs61a.org/hw/hw03/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 05 Jan 2020 19:29:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="John DeNero" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="../../../cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../fonts.googleapis.com/css26d9.css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/mono-blue.css">
    <link rel="icon" href="../../assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="../../assets/css/hw.css">


    <title>
Homework 3 | CS 61A Fall 2019
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="../../assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="../../weekly.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="../../instructor.html">Instructors</a></li>
                <li><a href="../../TAs.html">TAs</a></li>
                <li><a href="../../tutors.html">Tutors</a></li>
                <li><a href="../../academic-interns.html">Academic Interns</a></li>
              </ul>
            </li>
            <li><a href="../../resources.html">Resources</a></li>
            <li><a href="../../articles/about.html">Syllabus</a></li>
            <li><a href="https://piazza.com/berkeley/fall2019/cs61a" target="_blank">Piazza</a></li>
            <li><a href="../../extra.html">Extra</a></li>
            <!-- <li><a href="https://scheme.cs61a.org">Scheme</a></li> -->
            <!-- <li><a href="https://sql.cs61a.org">SQL</a></li> -->
            <li><a href="https://code.cs61a.org/">Code</a></li>
            <li><a href="http://tutor.cs61a.org/">Tutor</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Homework 3: 

        
        
        <ul class="inline-block list-inline">
          <li><a href="hw03.zip" class="label label-outline">hw03.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<p><em>Due by 11:59pm on Thursday, September 26</em></p>





<h2>Instructions</h2>

<p>Download <a href="hw03.zip">hw03.zip</a>. Inside the archive, you will find a file called
<a href="hw03.py">hw03.py</a>, along with a copy of the <code>ok</code> autograder.</p>

<p><strong>Submission:</strong> When you are done, submit with <code>python3 ok
  --submit</code>.  You may submit more than once before the deadline; only the
final submission will be scored. Check that you have successfully submitted
your code on <a href="https://okpy.org/">okpy.org</a>.  See <a
  href="../../lab/lab00/index.html#submitting-the-assignment">Lab 0</a> for more instructions on
submitting assignments.</p>

<p><strong>Using Ok:</strong> If you have any questions about using Ok, please
refer to <a href="../../articles/using-ok.html">this guide.</a>


  <p><strong>Readings:</strong> You might find the following references
  useful:</p>
  <ul>
  <li><a href="http://composingprograms.com/pages/22-data-abstraction.html">Section 2.2</a></li>
  <li><a href="http://composingprograms.com/pages/23-sequences.html">Section 2.3</a></li>
</ul>
  

<p><strong>Grading:</strong> Homework is graded based on effort, not
correctness.  However, there is no partial credit; you must show substantial
effort on every problem to receive any points.
<strong>This homework is out of 2 points.</strong>




    
<h2 id="required-questions">Required questions</h2>


<h3 class="question" id="q1">Q1: Num Sevens</h3>

<p>Write a recursive function <code>num_sevens</code> that takes a positive integer <code>n</code> and
returns the number of times the digit 7 appears in <code>n</code>.
<br/>
<em>Use recursion - the tests will fail if you use any assignment statements.</em></p>

<solution>

<pre><code>def num_sevens(n):
    &quot;&quot;&quot;Returns the number of times 7 appears as a digit of n.

    &gt;&gt;&gt; num_sevens(3)
    0
    &gt;&gt;&gt; num_sevens(7)
    1
    &gt;&gt;&gt; num_sevens(7777777)
    7
    &gt;&gt;&gt; num_sevens(2637)
    1
    &gt;&gt;&gt; num_sevens(76370)
    2
    &gt;&gt;&gt; num_sevens(12345)
    0
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; # ban all assignment statements
    &gt;&gt;&gt; check(HW_SOURCE_FILE, &#x27;num_sevens&#x27;,
    ...       [&#x27;Assign&#x27;, &#x27;AugAssign&#x27;])
    True
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q num_sevens</code></pre>



<h3 class="question" id="q2">Q2: Ping-pong</h3>

<p>The ping-pong sequence counts up starting from 1 and is always either counting
up or counting down.  At element <code>k</code>, the direction switches if <code>k</code> is a
multiple of 7 or contains the digit 7.  The first 30 elements of the ping-pong
sequence are listed below, with direction swaps marked using brackets at the
7th, 14th, 17th, 21st, 27th, and 28th elements:</p>

<pre><code>1 2 3 4 5 6 [7] 6 5 4 3 2 1 [0] 1 2 [3] 2 1 0 [&#x2d;1] 0 1 2 3 4 [5] [4] 5 6</code></pre>

<p>Implement a function <code>pingpong</code> that returns the nth element of the ping-pong
sequence <em>without using any assignment statements</em>.</p>

<p>You may use the function <code>num_sevens</code>, which you defined in the previous question.</p>

<blockquote><p><em>Hint</em>: If you're stuck, first try implementing <code>pingpong</code> using assignment
statements and a <code>while</code> statement. Then, to convert this into a recursive
solution, write a helper function that has a parameter for each variable that
changes values in the body of the while loop.</p></blockquote>

<solution>

<pre><code>def pingpong(n):
    &quot;&quot;&quot;Return the nth element of the ping&#x2d;pong sequence.

    &gt;&gt;&gt; pingpong(7)
    7
    &gt;&gt;&gt; pingpong(8)
    6
    &gt;&gt;&gt; pingpong(15)
    1
    &gt;&gt;&gt; pingpong(21)
    &#x2d;1
    &gt;&gt;&gt; pingpong(22)
    0
    &gt;&gt;&gt; pingpong(30)
    6
    &gt;&gt;&gt; pingpong(68)
    2
    &gt;&gt;&gt; pingpong(69)
    1
    &gt;&gt;&gt; pingpong(70)
    0
    &gt;&gt;&gt; pingpong(71)
    1
    &gt;&gt;&gt; pingpong(72)
    0
    &gt;&gt;&gt; pingpong(100)
    2
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; # ban assignment statements
    &gt;&gt;&gt; check(HW_SOURCE_FILE, &#x27;pingpong&#x27;, [&#x27;Assign&#x27;, &#x27;AugAssign&#x27;])
    True
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<!--

<pre><code>def has_seven(k):
    &quot;&quot;&quot;Returns True if at least one of the digits of k is a 7, False otherwise.

    &gt;&gt;&gt; has_seven(3)
    False
    &gt;&gt;&gt; has_seven(7)
    True
    &gt;&gt;&gt; has_seven(2734)
    True
    &gt;&gt;&gt; has_seven(2634)
    False
    &gt;&gt;&gt; has_seven(734)
    True
    &gt;&gt;&gt; has_seven(7777)
    True
    &quot;&quot;&quot;
    if k % 10 == 7:
        return True
    elif k &lt; 10:
        return False
    else:
        return has_seven(k // 10)</code></pre>

-->

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q pingpong</code></pre>


<h3 class="question" id="q3">Q3: Count change</h3>

<p>Once the machines take over, the denomination of every coin will be a power of
two: 1-cent, 2-cent, 4-cent, 8-cent, 16-cent, etc. There will be no limit to
how much a coin can be worth.</p>

<p>Given a positive integer <code>amount</code>, a set of coins makes change for <code>amount</code> if
the sum of the values of the coins is <code>amount</code>.  For example, the following
sets make change for <code>7</code>:</p>

<ul>
  <li>7 1-cent coins</li>
  <li>5 1-cent, 1 2-cent coins</li>
  <li>3 1-cent, 2 2-cent coins</li>
  <li>3 1-cent, 1 4-cent coins</li>
  <li>1 1-cent, 3 2-cent coins</li>
  <li>1 1-cent, 1 2-cent, 1 4-cent coins</li>
</ul>

<p>Thus, there are 6 ways to make change for <code>7</code>.  Write a recursive function
<code>count_change</code> that takes a positive integer <code>amount</code> and returns the number of
ways to make change for <code>amount</code> using these coins of the future.</p>

<blockquote><p><em>Hint:</em> Refer the <a href="http://composingprograms.com/pages/17-recursive-functions.html#example-partitions">implementation</a> of <code>count_partitions</code> for an
example of how to count the ways to sum up to an amount with smaller parts.
If you need to keep track of more than one value across recursive calls,
consider writing a helper function.</p></blockquote>

<solution>

<pre><code>def count_change(amount):
    &quot;&quot;&quot;Return the number of ways to make change for amount.

    &gt;&gt;&gt; count_change(7)
    6
    &gt;&gt;&gt; count_change(10)
    14
    &gt;&gt;&gt; count_change(20)
    60
    &gt;&gt;&gt; count_change(100)
    9828
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; # ban iteration
    &gt;&gt;&gt; check(HW_SOURCE_FILE, &#x27;count_change&#x27;, [&#x27;While&#x27;, &#x27;For&#x27;])
    True
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q count_change</code></pre>




<h2 id="optional-list-question">Optional List Question</h2>


<h3 class="question" id="q4">Q4: Flatten</h3>

<p>Write a function <code>flatten</code> that takes a (possibly deep) list and "flattens" it.
For example:</p>

<pre><code>&gt;&gt;&gt; lst = [1, [[2], 3], 4, [5, 6]]
&gt;&gt;&gt; flatten(lst)
[1, 2, 3, 4, 5, 6]</code></pre>

<p>Make sure your solution does not mutate the input list.</p>

<p><em>Hint</em>: you can check if something is a list by using the built-in
<code>type</code> function. For example,</p>

<pre><code>&gt;&gt;&gt; type(3) == list
False
&gt;&gt;&gt; type([1, 2, 3]) == list
True</code></pre>

<solution>

<pre><code>def flatten(lst):
    &quot;&quot;&quot;Returns a flattened version of lst.

    &gt;&gt;&gt; flatten([1, 2, 3])     # normal list
    [1, 2, 3]
    &gt;&gt;&gt; x = [1, [2, 3], 4]      # deep list
    &gt;&gt;&gt; flatten(x)
    [1, 2, 3, 4]
    &gt;&gt;&gt; x # Ensure x is not mutated
    [1, [2, 3], 4]
    &gt;&gt;&gt; x = [[1, [1, 1]], 1, [1, 1]] # deep list
    &gt;&gt;&gt; flatten(x)
    [1, 1, 1, 1, 1, 1]
    &gt;&gt;&gt; x
    [[1, [1, 1]], 1, [1, 1]]
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q flatten</code></pre>


<h2 id="just-for-fun-questions">Just for Fun Questions</h2>


<blockquote><p>These questions are pretty much out of scope for 61A but they are fun extensions
of the course material. Attempting them out might solidify your understanding!</p></blockquote>

<h3 class="question" id="q5">Q5: Towers of Hanoi</h3>

<p>A classic puzzle called the Towers of Hanoi is a game that consists of three
rods, and a number of disks of different sizes which can slide onto any rod.
The puzzle starts with <code>n</code> disks in a neat stack in ascending order of size on
a <code>start</code> rod, the smallest at the top, forming a conical shape.</p>

<p><img class="img-responsive center-block" src="../../../upload.wikimedia.org/wikipedia/commons/0/07/Tower_of_Hanoi.jpg" alt="Towers of Hanoi"></p>

<p>The objective of the puzzle is to move the entire stack to an <code>end</code> rod,
obeying the following rules:</p>

<ul>
  <li>Only one disk may be moved at a time.</li>
  <li>Each move consists of taking the top (smallest) disk from one of the rods and
  sliding it onto another rod, on top of the other disks that may already be
  present on that rod.</li>
  <li>No disk may be placed on top of a smaller disk.</li>
</ul>

<p>Complete the definition of <code>move_stack</code>, which prints out the steps required to
move <code>n</code> disks from the <code>start</code> rod to the <code>end</code> rod without violating the
rules. The provided <code>print_move</code> function will print out the step to move a
single disk from the given <code>origin</code> to the given <code>destination</code>.</p>

<blockquote><p><em>Hint:</em> Draw out a few games with various <code>n</code> on a piece of paper and try to
find a pattern of disk movements that applies to any <code>n</code>. In your solution,
take the recursive leap of faith whenever you need to move any amount of
disks less than <code>n</code> from one rod to another. If you need more help, see
the following hints.</p></blockquote>


        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint 1<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">
See the following animation of the Towers of Hanoi, found on <a href="../../../commons.wikimedia.org/wiki/File_Iterative_algorithm_solving_a_6_disks_Tower_of_Hanoi.html">Wikimedia</a> by user <a href="https://commons.wikimedia.org/wiki/User:Trixx">Trixx</a>

<img class="img-responsive center-block" src="../../../upload.wikimedia.org/wikipedia/commons/8/8d/Iterative_algorithm_solving_a_6_disks_Tower_of_Hanoi.gif"/>
</div>
<br>

        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint 2<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">
The strategy used in Towers of Hanoi is to move all but the bottom disc to the second peg, then moving the bottom disc to the third peg, then moving all but the second disc from the second to the third peg.
</div>
<br>

        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint 3<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">
One thing you don't need to worry about is collecting all the steps. <code>print</code> effectively "collects" all the results in the terminal as long as you make sure that the moves are printed in order.
</div>

<solution>

<pre><code>def print_move(origin, destination):
    &quot;&quot;&quot;Print instructions to move a disk.&quot;&quot;&quot;
    print(&quot;Move the top disk from rod&quot;, origin, &quot;to rod&quot;, destination)

def move_stack(n, start, end):
    &quot;&quot;&quot;Print the moves required to move n disks on the start pole to the end
    pole without violating the rules of Towers of Hanoi.

    n &#x2d;&#x2d; number of disks
    start &#x2d;&#x2d; a pole position, either 1, 2, or 3
    end &#x2d;&#x2d; a pole position, either 1, 2, or 3

    There are exactly three poles, and start and end must be different. Assume
    that the start pole has at least n disks of increasing size, and the end
    pole is either empty or has a top disk larger than the top n start disks.

    &gt;&gt;&gt; move_stack(1, 1, 3)
    Move the top disk from rod 1 to rod 3
    &gt;&gt;&gt; move_stack(2, 1, 3)
    Move the top disk from rod 1 to rod 2
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 2 to rod 3
    &gt;&gt;&gt; move_stack(3, 1, 3)
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 1 to rod 2
    Move the top disk from rod 3 to rod 2
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 2 to rod 1
    Move the top disk from rod 2 to rod 3
    Move the top disk from rod 1 to rod 3
    &quot;&quot;&quot;
    assert 1 &lt;= start &lt;= 3 and 1 &lt;= end &lt;= 3 and start != end, &quot;Bad start/end&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q move_stack</code></pre>


<h3 class="question" id="q6">Q6: Anonymous factorial</h3>

<p>The recursive factorial function can be written as a single expression
by using a <a href="http://docs.python.org/py3k/reference/expressions.html#conditional-expressions">conditional expression</a>.</p>

<pre><code>&gt;&gt;&gt; fact = lambda n: 1 if n == 1 else mul(n, fact(sub(n, 1)))
&gt;&gt;&gt; fact(5)
120</code></pre>

<p>However, this implementation relies on the fact (no pun intended) that
<code>fact</code> has a name, to which we refer in the body of <code>fact</code>.  To write a
recursive function, we have always given it a name using a <code>def</code> or
assignment statement so that we can refer to the function within its
own body.  In this question, your job is to define fact recursively
without giving it a name!</p>

<p>Write an expression that computes <code>n</code> factorial using only call
expressions, conditional expressions, and lambda expressions (no
assignment or def statements).  <em>Note in particular that you are not
allowed to use <code>make_anonymous_factorial</code> in your return expression.</em>
The <code>sub</code> and <code>mul</code> functions from the <code>operator</code> module are the only
built-in functions required to solve this problem:</p>

<solution>

<pre><code>from operator import sub, mul

def make_anonymous_factorial():
    &quot;&quot;&quot;Return the value of an expression that computes factorial.

    &gt;&gt;&gt; make_anonymous_factorial()(5)
    120
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; # ban any assignments or recursion
    &gt;&gt;&gt; check(HW_SOURCE_FILE, &#x27;make_anonymous_factorial&#x27;, [&#x27;Assign&#x27;, &#x27;AugAssign&#x27;, &#x27;FunctionDef&#x27;, &#x27;Recursion&#x27;])
    True
    &quot;&quot;&quot;
    return &#x27;YOUR_EXPRESSION_HERE&#x27;
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q make_anonymous_factorial</code></pre>

<script>
/*
This code is duplicated in lab-check-in.html. Doesn't work if we move it to a separate
file because of JQuery document ready concurrency issues.
*/
$(function() {
  $('.alwaystoggle').css('display', 'inline-block');
  $('.alwaystoggle').click(function() {
    var solution_id = $(this).attr('id');
    $('div.' + solution_id).slideToggle(600);
  });
});
</script>


  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#required-questions">Required questions</a></li>
  <ul>
    <li><a href="#q1">Q1: Num Sevens</a></li>
    <li><a href="#q2">Q2: Ping-pong</a></li>
    <li><a href="#q3">Q3: Count change</a></li>
  </ul>
  <li><a href="#optional-list-question">Optional List Question</a></li>
  <ul>
    <li><a href="#q4">Q4: Flatten</a></li>
  </ul>
  <li><a href="#just-for-fun-questions">Just for Fun Questions</a></li>
  <ul>
    <li><a href="#q5">Q5: Towers of Hanoi</a></li>
    <li><a href="#q6">Q6: Anonymous factorial</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="../../index.html">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../weekly.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours.html">Office Hours</a></li>
            <li><a href="../../staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../resources.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/studying.html">Studying Guide</a></li>
            <li><a href="../../articles/debugging.html">Debugging Guide</a></li>
            <li><a href="../../articles/composition.html">Composition Guide</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/about.html#assignments">Assignments</a></li>
            <li><a href="../../articles/about.html#exams">Exams</a></li>
            <li><a href="../../articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    console.log(target);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      // window.scrollTo(0, 0);
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    event.preventDefault();
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      goToId(this.hash);
      document.location.hash = this.hash;
    } else {
      window.open(this.href);
    }
  });
</script>

  </body>

<!-- Mirrored from cs61a.org/hw/hw03/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 05 Jan 2020 19:29:06 GMT -->
</html>